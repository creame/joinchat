!function(t,o){"use strict";Math.imul=Math.imul||function(t,o){var e=65535&t,n=65535&o;return e*n+((t>>>16&65535)*n+e*(o>>>16&65535)<<16>>>0)|0},o.joinchat_obj=o.joinchat_obj||{},joinchat_obj=t.extend({$div:null,$badge:null,settings:null,store:null,chatbox:!1,is_mobile:!1},joinchat_obj),joinchat_obj.send_event=function(t){var e=o[this.settings.ga_tracker||"ga"];"function"==typeof e&&"function"==typeof e.getAll?(e("set","transport","beacon"),e.getAll().forEach(function(o){o.send("event","JoinChat","click",t)})):"function"==typeof gtag&&gtag("event","click",{event_category:"JoinChat",event_label:t,transport_type:"beacon"});"object"==typeof dataLayer&&dataLayer.push({event:"JoinChat",eventAction:"click",eventLabel:t}),"function"==typeof fbq&&fbq("trackCustom","JoinChat",{eventAction:"click",eventLabel:t})},joinchat_obj.hash=function(t){for(var o=0,e=1;o<t.length;o++)e=Math.imul(e+t.charCodeAt(o)|0,2654435761);return(e^e>>>17)>>>0},joinchat_obj.whatsapp_link=function(t,o,e){return((e=void 0!==e?e:this.settings.whatsapp_web&&!this.is_mobile)?"https://web.whatsapp.com/send":"https://api.whatsapp.com/send")+"?phone="+encodeURIComponent(t)+"&text="+encodeURIComponent(o||"")},joinchat_obj.chatbox_show=function(){this.chatbox||(this.chatbox=!0,this.$div.addClass("joinchat--chatbox"),this.settings.message_badge&&this.$badge.hasClass("joinchat__badge--in")&&this.$badge.toggleClass("joinchat__badge--in joinchat__badge--out"),t(document).trigger("joinchat:show"))},joinchat_obj.chatbox_hide=function(){this.chatbox&&(this.chatbox=!1,this.$div.removeClass("joinchat--chatbox joinchat--tooltip"),t(document).trigger("joinchat:hide"))},joinchat_obj.save_hash=function(t){var o=(this.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean);-1==o.indexOf(t)&&(o.push(t),this.store.setItem("joinchat_hashes",o.join(",")))},joinchat_obj.open_whatsapp=function(){var e={link:this.whatsapp_link(this.settings.telephone,this.settings.message_send)},n=new RegExp("^https?://(wa.me|(api|web|chat).whatsapp.com|"+location.hostname.replace(".",".")+")/.*","i");t(document).trigger("joinchat:open",[e,this.settings]),n.test(e.link)?(this.send_event(e.link),o.open(e.link,"joinchat")):console.error("Join.chat: the link doesn't seem safe, it must point to the current domain or whatsapp.com")},t(function(){joinchat_obj.$div=t(".joinchat"),joinchat_obj.$badge=joinchat_obj.$div.find(".joinchat__badge"),joinchat_obj.settings=joinchat_obj.$div.data("settings"),joinchat_obj.is_mobile=!!navigator.userAgent.match(/Android|iPhone|BlackBerry|IEMobile|Opera Mini/i);try{localStorage.setItem("test",1),localStorage.removeItem("test"),joinchat_obj.store=localStorage}catch(t){joinchat_obj.store={_data:{},setItem:function(t,o){this._data[t]=String(o)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:null}}}if(void 0===joinchat_obj.settings)try{joinchat_obj.settings=JSON.parse(joinchat_obj.$div.attr("data-settings"))}catch(t){joinchat_obj.settings=void 0}joinchat_obj.$div.length&&joinchat_obj.settings&&joinchat_obj.settings.telephone&&(joinchat_obj.is_mobile||!joinchat_obj.settings.mobile_only?function(){var e,n,i=1e3*joinchat_obj.settings.button_delay,a=1e3*joinchat_obj.settings.message_delay,s=!!joinchat_obj.settings.message_text,c=(joinchat_obj.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean),h=parseInt(joinchat_obj.store.getItem("joinchat_views")||1)>=joinchat_obj.settings.message_views,j=s?joinchat_obj.hash(joinchat_obj.settings.message_text).toString():"no_cta",_=c.indexOf(j)>-1;function r(){clearTimeout(n),joinchat_obj.chatbox_show()}function b(){joinchat_obj.save_hash(j),joinchat_obj.chatbox_hide()}function l(){s&&!joinchat_obj.chatbox?r():(b(),joinchat_obj.open_whatsapp())}var g="joinchat--show";_||s&&a&&!joinchat_obj.settings.message_badge&&h||(g+=" joinchat--tooltip");setTimeout(function(){joinchat_obj.$div.addClass(g)},i),s&&!_&&a&&(joinchat_obj.settings.message_badge?n=setTimeout(function(){joinchat_obj.$badge.addClass("joinchat__badge--in")},i+a):h&&(n=setTimeout(r,i+a)));s&&!joinchat_obj.is_mobile&&t(".joinchat__button",joinchat_obj.$div).mouseenter(function(){e=setTimeout(r,1500)}).mouseleave(function(){clearTimeout(e)});if(t(".joinchat__button",joinchat_obj.$div).click(l),t(".joinchat__close",joinchat_obj.$div).click(b),t(".joinchat__box__scroll").on("mousewheel DOMMouseScroll",function(t){t.preventDefault();var o=t.originalEvent.wheelDelta||-t.originalEvent.detail;this.scrollTop+=30*(o<0?1:-1)}),joinchat_obj.is_mobile){var u,d=o.innerHeight;t(document).on("focus blur","input, textarea",function(){clearTimeout(u),u=setTimeout(function(){joinchat_obj.$div.toggleClass("joinchat--show",.7*d<o.innerHeight)},800)})}if(t(document).on("click",".joinchat_open",function(t){t.preventDefault(),joinchat_obj.chatbox||l()}),t(document).on("click",".joinchat_close",function(t){t.preventDefault(),b()}),s&&"IntersectionObserver"in o){var p=t(".joinchat_show,.joinchat_force_show");if(p.length>0){var m=new IntersectionObserver(function(o){t.each(o,function(){if(this.intersectionRatio>0&&(!_||t(this.target).hasClass("joinchat_force_show")))return r(),m.disconnect(),!1})});p.each(function(){m.observe(this)})}}t(document).trigger("joinchat:start")}():t(document).on("click",".joinchat_open",function(t){t.preventDefault(),joinchat_obj.open_whatsapp()})),joinchat_obj.store.setItem("joinchat_views",parseInt(joinchat_obj.store.getItem("joinchat_views")||0)+1)})}(jQuery,window);