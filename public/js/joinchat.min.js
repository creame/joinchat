!function(t,i){"use strict";Math.imul=Math.imul||function(t,i){var n=65535&t,e=65535&i;return n*e+((t>>>16&65535)*e+n*(i>>>16&65535)<<16>>>0)|0},i.joinchat_public=i.joinchat_public||{},joinchat_public=t.extend({$div:null,$badge:null,settings:null,store:null,chatbox:!1,is_mobile:!1},joinchat_public),joinchat_public.send_event=function(t){var n=i[joinchat_public.settings.ga_tracker||"ga"];"function"==typeof n&&"function"==typeof n.getAll?(n("set","transport","beacon"),n.getAll().forEach(function(i){i.send("event","JoinChat","click",t)})):"function"==typeof gtag&&gtag("event","click",{event_category:"JoinChat",event_label:t,transport_type:"beacon"});"object"==typeof dataLayer&&dataLayer.push({event:"JoinChat",eventAction:"click",eventLabel:t}),"function"==typeof fbq&&fbq("trackCustom","JoinChat",{eventAction:"click",eventLabel:t})},joinchat_public.hash=function(t){for(var i=0,n=1;i<t.length;i++)n=Math.imul(n+t.charCodeAt(i)|0,2654435761);return(n^n>>>17)>>>0},joinchat_public.whatsapp_link=function(t,i,n){return((n=void 0!==n?n:joinchat_public.settings.whatsapp_web&&!joinchat_public.is_mobile)?"https://web.whatsapp.com/send":"https://api.whatsapp.com/send")+"?phone="+encodeURIComponent(t)+"&text="+encodeURIComponent(i||"")},joinchat_public.chatbox_show=function(){joinchat_public.$div.addClass("joinchat--chatbox"),joinchat_public.chatbox=!0,joinchat_public.settings.message_badge&&joinchat_public.$badge.hasClass("joinchat__badge--in")&&joinchat_public.$badge.toggleClass("joinchat__badge--in joinchat__badge--out"),t(document).trigger("joinchat:show")},joinchat_public.chatbox_hide=function(){joinchat_public.$div.removeClass("joinchat--chatbox joinchat--tooltip"),joinchat_public.chatbox=!1,t(document).trigger("joinchat:hide")},joinchat_public.save_hash=function(t){var i=(joinchat_public.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean);-1==i.indexOf(t)&&(i.push(t),joinchat_public.store.setItem("joinchat_hashes",i.join(",")))},t(function(){joinchat_public.$div=t(".joinchat"),joinchat_public.$badge=joinchat_public.$div.find(".joinchat__badge"),joinchat_public.settings=joinchat_public.$div.data("settings"),joinchat_public.is_mobile=!!navigator.userAgent.match(/Android|iPhone|BlackBerry|IEMobile|Opera Mini/i);try{localStorage.setItem("test",1),localStorage.removeItem("test"),joinchat_public.store=localStorage}catch(t){joinchat_public.store={_data:{},setItem:function(t,i){this._data[t]=String(i)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:null}}}if(void 0===joinchat_public.settings)try{joinchat_public.settings=JSON.parse(joinchat_public.$div.attr("data-settings"))}catch(t){joinchat_public.settings=void 0}joinchat_public.$div.length&&joinchat_public.settings&&joinchat_public.settings.telephone&&function(){var n,e,o=1e3*joinchat_public.settings.button_delay,c=1e3*joinchat_public.settings.message_delay,a=!!joinchat_public.settings.message_text,h=(joinchat_public.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean),s="yes"==joinchat_public.store.getItem("joinchat_visited"),l=a?joinchat_public.hash(joinchat_public.settings.message_text).toString():"no_cta",u=h.indexOf(l)>-1;function _(){clearTimeout(e),joinchat_public.chatbox_show()}function p(){joinchat_public.save_hash(l),joinchat_public.chatbox_hide()}function b(){if(a&&!joinchat_public.chatbox)_();else{var n={link:joinchat_public.whatsapp_link(joinchat_public.settings.telephone,joinchat_public.settings.message_send)},e=new RegExp("^https?://(wa.me|(api|web|chat).whatsapp.com|"+location.hostname.replace(".",".")+")/.*","i");joinchat_public.chatbox&&p(),t(document).trigger("joinchat:open",[n,joinchat_public.settings]),e.test(n.link)?(joinchat_public.send_event(n.link),i.open(n.link,"joinchat")):console.error("Join.chat: the link doesn't seem safe, it must point to the current domain or whatsapp.com")}}if(joinchat_public.store.setItem("joinchat_visited","yes"),!joinchat_public.settings.mobile_only||joinchat_public.is_mobile){var j="joinchat--show";u||a&&c&&!joinchat_public.settings.message_badge&&s||(j+=" joinchat--tooltip"),setTimeout(function(){joinchat_public.$div.addClass(j)},o),a&&!u&&c&&(joinchat_public.settings.message_badge?e=setTimeout(function(){joinchat_public.$badge.addClass("joinchat__badge--in")},o+c):s&&(e=setTimeout(_,o+c)))}a&&!joinchat_public.is_mobile&&t(".joinchat__button",joinchat_public.$div).mouseenter(function(){joinchat_public.chatbox||(n=setTimeout(_,1500))}).mouseleave(function(){clearTimeout(n)});if(t(".joinchat__button",joinchat_public.$div).click(b),t(".joinchat__close",joinchat_public.$div).click(p),t(".joinchat__box__scroll").on("mousewheel DOMMouseScroll",function(t){t.preventDefault();var i=t.originalEvent.wheelDelta||-t.originalEvent.detail;this.scrollTop+=30*(i<0?1:-1)}),joinchat_public.is_mobile){var r,g=i.innerHeight;t(document).on("focus blur","input, textarea",function(){clearTimeout(r),r=setTimeout(function(){joinchat_public.$div.toggleClass("joinchat--show",.7*g<i.innerHeight)},800)})}t(document).on("click",".joinchat_open",function(t){t.preventDefault(),joinchat_public.chatbox||b()}),t(document).trigger("joinchat:start")}()})}(jQuery,window);