!function(s,o,c,n){"use strict";var a;n=s.extend({settings:null,is_mobile:!!navigator.userAgent.match(/Android|iPhone|BlackBerry|IEMobile|Opera Mini/i),can_qr:"function"==typeof kjua},n),(o.joinchat_obj=n).send_event=function(n){var t,e,a,i;(n=s.extend({event_category:"JoinChat",event_label:"",event_action:"",chat_channel:"whatsapp",chat_id:"--",is_mobile:this.is_mobile?"yes":"no",page_location:location.href,page_title:c.title||"no title"},n)).event_label=n.event_label||n.link||"",n.event_action=n.event_action||n.chat_channel+": "+n.chat_id,delete n.link,!1!==s(c).triggerHandler("joinchat:event",[n])&&(i=o[this.settings.ga_tracker]||o.ga||o.__gaTracker,t=o[this.settings.data_layer]||o[o.gtm4wp_datalayer_name]||o.dataLayer,"function"==typeof i&&"function"==typeof i.getAll&&(i("set","transport","beacon"),i.getAll().forEach(function(t){t.send("event",n.event_category,n.event_action,n.event_label)})),s.each(n,function(t,e){n[t]="string"==typeof e?e.substring(0,100):e}),"function"==typeof gtag&&"object"==typeof t&&(e=this.settings.ga_event||"generate_lead",delete(a=s.extend({transport_type:"beacon"},n)).page_location,delete a.page_title,t.forEach(function(t){"config"==t[0]&&t[1]&&"G-"==t[1].substring(0,2)&&(a.send_to=t[1],gtag("event",e,a))}),this.settings.gads&&gtag("event","conversion",{send_to:this.settings.gads})),i=n.event_category,delete n.event_category,"object"==typeof t&&t.push(s.extend({event:i},n)),"function"==typeof fbq&&fbq("trackCustom",i,n))},n.whatsapp_link=function(t,e,n){return e=void 0!==e?e:this.settings.message_send||"",((n=void 0!==n?n:this.settings.whatsapp_web&&!this.is_mobile)?"https://web.whatsapp.com/send?phone=":"https://wa.me/")+encodeURIComponent(t||this.settings.telephone)+(e?(n?"&text=":"?text=")+encodeURIComponent(e):"")},n.open_whatsapp=function(t,e){t=t||this.settings.telephone,e=void 0!==e?e:this.settings.message_send||"";t={link:this.whatsapp_link(t,e),chat_channel:"whatsapp",chat_id:t,chat_message:e},e=new RegExp("^https?://(wa.me|(api|web|chat).whatsapp.com|"+location.hostname.replace(".",".")+")/.*","i");!1!==s(c).triggerHandler("joinchat:open",[t])&&(e.test(t.link)?(this.send_event(t),o.open(t.link,"joinchat","noopener")):console.error("Joinchat: the link doesn't seem safe, it must point to the current domain or whatsapp.com"))},n.qr=function(t,e){return kjua(s.extend({text:t,render:"canvas",rounded:80},n.settings.qr||{},e||{}))},s(c).on("click",'.joinchat_open, .joinchat_app, a[href="#joinchat"], a[href="#whatsapp"]',function(t){t.preventDefault(),n.open_whatsapp(s(this).data("phone"),s(this).data("message"))}),n.can_qr&&!n.is_mobile?s(".joinchat-button__qr").each(function(){s(this).append(n.qr(n.whatsapp_link(s(this).data("phone"),s(this).data("message"),!1)))}):s(".wp-block-joinchat-button figure").remove(),n.settings&&void 0!==n.settings.sku&&(a=n.settings.message_send,s("form.variations_form").on("found_variation reset_data",function(t,e){e=e&&e.sku||n.settings.sku;n.settings.message_send=a.replace(/<sku>.*<\/sku>/g,e)}))}(jQuery,window,document,window.joinchat_obj||{});